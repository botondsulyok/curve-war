
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curve War</title>
    <link rel="stylesheet" href="index.css">
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        
        <!-- Main Menu -->
        <div id="menu-overlay" class="overlay">
            <div class="menu-box">
                <div class="menu-content">
                    <h1>Curve War</h1>
                    <p class="subtitle">Last player standing wins the round.</p>
                    <div class="settings">
                        <div class="setting-item-full-width">
                            <label>Game Mode</label>
                            <div class="segmented-control" id="game-mode-control">
                                <button data-value="multiplayer" class="active">Multiplayer</button>
                                <button data-value="practice">Practice</button>
                            </div>
                        </div>
                         <div class="settings-grid">
                            <div class="setting-item" id="player-count-setting">
                                <label for="player-count">Players</label>
                                <div class="player-count-control">
                                    <button id="player-count-minus" aria-label="Decrease player count">-</button>
                                    <span id="player-count-value">2</span>
                                    <button id="player-count-plus" aria-label="Increase player count">+</button>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="powerups-toggle">Power-ups</label>
                                 <label class="switch">
                                    <input type="checkbox" id="powerups-toggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label for="obstacles-toggle">Obstacles & Boosters</label>
                                 <label class="switch">
                                    <input type="checkbox" id="obstacles-toggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                             <div class="setting-item">
                                <label for="shooting-toggle">Shooting</label>
                                 <label class="switch">
                                    <input type="checkbox" id="shooting-toggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        <div class="setting-item-full-width">
                            <label>Game Area Size</label>
                            <div class="segmented-control" id="game-size-control">
                                <button data-value="small">Small</button>
                                <button data-value="medium" class="active">Medium</button>
                                <button data-value="large">Large</button>
                            </div>
                        </div>
                        <div class="setting-item-full-width" id="game-length-setting">
                            <label>Game Length</label>
                            <div class="segmented-control" id="game-length-control">
                                <button data-value="short">Short</button>
                                <button data-value="normal" class="active">Normal</button>
                                <button data-value="marathon">Marathon</button>
                            </div>
                       </div>
                       <div id="advanced-settings-container" class="setting-group">
                            <legend>Advanced Settings</legend>
                            <!-- Advanced settings will be generated by UIManager -->
                       </div>
                    </div>
                     <div id="controls-info"></div>
                </div>
                <div class="menu-footer">
                     <div class="button-group">
                        <button id="start-game-btn" class="action-btn">Start Game</button>
                        <button id="how-to-play-btn" class="secondary-btn">How to Play</button>
                    </div>
                    <button id="reset-defaults-btn">Reset to Defaults</button>
                </div>
            </div>
        </div>

        <!-- Player Settings Screen -->
        <div id="player-settings-overlay" class="overlay hidden">
            <div class="menu-box">
                <h2 id="player-settings-title">Player Settings</h2>
                <div id="player-settings-form" class="settings-content">
                    <div class="adv-setting-row">
                        <label for="player-name-input">Name</label>
                        <input type="text" id="player-name-input" class="text-input" maxlength="12">
                    </div>
                    <div class="setting-item-full-width">
                        <label>Color</label>
                        <div id="player-color-selector" class="color-selector">
                            <!-- color swatches go here -->
                        </div>
                    </div>
                    <h3 class="controls-header">Controls</h3>
                    <div class="adv-setting-row">
                        <label for="control-left-input">Left</label>
                        <button id="control-left-input" class="key-input-btn"></button>
                    </div>
                    <div class="adv-setting-row">
                        <label for="control-right-input">Right</label>
                        <button id="control-right-input" class="key-input-btn"></button>
                    </div>
                    <div class="adv-setting-row">
                        <label for="control-fire-input">Fire</label>
                        <button id="control-fire-input" class="key-input-btn"></button>
                    </div>
                </div>
                <div class="button-group">
                    <button id="save-player-settings-btn" class="action-btn">Save</button>
                    <button id="cancel-player-settings-btn" class="secondary-btn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- How to Play Screen -->
        <div id="how-to-play-overlay" class="overlay hidden">
            <div class="menu-box">
                <h2>How to Play</h2>
                <div class="how-to-play-content">
                    <h3>Objective</h3>
                    <p><strong>Multiplayer:</strong> Be the last player standing to win the round. <span id="how-to-play-winning-score"></span> You get points based on your survival rank in each round.</p>
                    <p><strong>Practice:</strong> Survive for as long as you can! There are no points, just the challenge of beating your own record.</p>
                    
                    <h3>Game Mechanics</h3>
                    <p><strong>Walls:</strong> Crashing into the outer walls or any player's trail will eliminate you.</p>
                     <p><strong>Shooting:</strong> Each player gets a limited number of shots per round. A successful hit on another player's head eliminates them instantly. Projectiles also carve a path through existing trails.</p>
                    <p><strong>Booster Pads:</strong> These glowing pads will give you a strong, sharp push. Use them for quick maneuvers or to dodge danger! (Can be disabled in the menu)</p>

                    <h3>Power-ups</h3>
                    <ul class="powerup-list">
                        <li><strong>‚è© Speed Boost:</strong> A temporary, controllable speed increase.</li>
                        <li><strong>üõ°Ô∏è Shield:</strong> Protects you from one projectile headshot. It does not protect against crashing into walls or trails.</li>
                        <li><strong>„Ä∞Ô∏è Thin Line:</strong> Your trail becomes thinner for a short time, making it a smaller target.</li>
                        <li><strong>üëª Ghost:</strong> Allows you to pass through player trails without crashing.</li>
                    </ul>
                </div>
                <button id="close-how-to-play-btn" class="action-btn">Got It!</button>
            </div>
        </div>


        <!-- Round/Game Over Screen -->
        <div id="round-over-overlay" class="overlay hidden">
             <div class="menu-box">
                <h2 id="end-of-round-title"></h2>
                <div id="practice-results" class="hidden">
                    <h3>Time Survived</h3>
                    <span id="survival-time-text">0.0s</span>
                </div>
                <div id="scoreboard-final"></div>
                <div class="button-group">
                    <button id="play-again-btn" class="action-btn">Next Round</button>
                    <button id="back-to-menu-btn" class="secondary-btn">Back to Menu</button>
                </div>
            </div>
        </div>

        <!-- Reset Confirmation Modal -->
        <div id="reset-confirm-overlay" class="overlay hidden">
            <div class="menu-box">
                <h2>Reset All Settings?</h2>
                <p class="subtitle" style="color: var(--secondary-text); line-height: 1.5;">This will restore all game options and player customizations to their original defaults. This action cannot be undone.</p>
                <div class="button-group">
                    <button id="confirm-reset-btn" class="action-btn">Yes, Reset Everything</button>
                    <button id="cancel-reset-btn" class="secondary-btn">Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- Countdown Timer -->
        <div id="countdown-overlay" class="overlay hidden">
            <div class="countdown-content">
                <h1 id="round-number-text"></h1>
                <h2 id="countdown-title"></h2>
                <span id="countdown-text">5</span>
            </div>
        </div>

        <!-- In-Game HUD -->
         <div id="hud" class="hidden">
            <div id="scoreboard"></div>
         </div>
    </div>
    <script type="module" src="src/index.tsx"></script>
<script type="module" src="/index.tsx"></script>
</body>
</html>